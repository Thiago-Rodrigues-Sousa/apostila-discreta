\chapter{L\'ogica de Predicados}

\epigraph{``Observe a estrada e diga-me quem você vê'', disse o Rei.\\
                 ``Eu vejo ninguém'', disse Alice.\\
                 ``Mas que excelente visão você possui!'', exclamou o
                 Rei. ``Ver Ninguém a tal distância! Eu nunca o vi!''}{Lewis Carroll, Alice no País dos Espelhos.}

\section{Motivação}

No capítulo anterior, estudamos a lógica proposicional de um ponto de
vista sintático e semântico e, além disso, utilizamos a dedução
natural e álgebra Booleana para verificar consequências e
equivalências lógicas.

Apesar de possuir uma série de aplicações, a lógica proposicional possui
limitações. A seguir apresentamos um exemplo que ilustra este problema.
\begin{Example}
Considere o seguinte argumento dedutivo:
\begin{quote}
Todo homem é mortal.\\ Sócrates é um homem. \\Logo, Sócrates é mortal.
\end{quote}
De acordo com nossa noção informal de dedução, este parece ser um
argumento válido. Sendo assim, este pode ser representado como um
sequente demonstrável utilizando dedução natural. Porém, quando tentamos
representar estas sentenças como fórmulas da lógica, podemos
perceber que nenhuma delas possui conectivos lógicos. Logo, todas
podem ser consideradas proposições simples, conforme mostramos
na tabela a seguir:

\begin{table}[h]
  \begin{tabular}{|l|c|}
    \hline
    Sentença & Fórmula \\ \hline
    Todo homem é mortal & $A$ \\
    Sócrates é um homem & $B$ \\
    Sócrates é mortal & $C$ \\\hline
  \end{tabular}
  \centering
\end{table}

Utilizando a modelagem apresentada na tabela acima, o sequente
\[
\{A,B\}\,\vdash\,C
\]
representa o argumento dedutivo em questão. Mas, como o leitor já deve
ter percebido, este não é provável utilizando o sistema de dedução
natural apresentado neste texto.
\end{Example}

Na seção \ref{soundcompleteprop} apresentamos que o sistema de dedução
natural é completo para a lógica proposicional, desta forma, toda
consequência lógica deve possuir um sequente provável
correspondente. De acordo com uma noção intuitiva de dedução lógica, o
argumento anterior é correto e portanto, deveríamos conseguir
representá-lo como um sequente demonstrável, o que, conforme
apresentado, não é possível.

O problema na modelagem formal deste argumento é que a lógica proposicional não possui expressividade para
representar sentenças que possuam alguma das seguintes formas:
\begin{itemize}
  \item Todo $x$ possui a propriedade $p$.
  \item Algum $x$ possui a propriedade $p$.
\end{itemize}
Tais sentenças possuem, implicitamente, um conjunto sobre o qual a
frase em questão deve ser interpretada como verdadeira ou falsa. No
caso do exemplo anterior, temos que a frase:
\begin{center}
Todo homem é mortal.
\end{center}
implicitamente se refere ao conjunto de todos os seres humanos. Esta
mesma frase poderia ser re-escrita de maneira a tornar o conjunto  de
seres humanos (que está ``implícito'') explícito como:
\begin{center}
Todo elemento do conjunto de seres humanos possui a propriedade ``mortal''.
\end{center}
Para representar sentenças como ``Todo homem é mortal'' precisamos de
estender a lógica proposicional de forma que sejamos capazes de
expressar propriedades sobre elementos de um certo conjunto. O
objetivo deste capítulo é estudarmos esta lógica, conhecida como
lógica de predicados ou lógica de primeira ordem.

\section{Introdução à lógica de predicados}\label{intropredlogic}

Para representar argumentos dedutivos como o apresentado na seção
anterior, devemos estender a lógica proposicional de maneira a sermos
capazes de nos referir a elementos de um certo conjunto, denominado
universo de discurso, e suas
propriedades. Para isso, a linguagem da lógica proposicional será
extendida com termos, que denotam elementos do universo de discurso;
predicados, que representam propriedades destes elementos
e quantificadores, que permite a especificação de que ``todos'' ou
``algum'' elemento do conjunto possui uma certa propriedade
especificada.

As próximas subseções apresentam uma descrição informal dos conceitos
de universo de discurso, predicados e quantificadores.

\subsection{Universo de discurso}

De maneira simples, qualquer conjunto não vazio pode ser considerado
como um universo de discurso para interpretação de uma fórmula.
O conjunto $\{\text{Sócrates}\}$ é um universo de discurso válido para o
argumento dedutivo apresentado no início deste capítulo, assim como o
conjunto $\{a\}$ ou o conjunto de todos os seres humanos,
já que todos são conjuntos não vazios de elementos.

Denominamos por \textit{constante}, um elemento qualquer do
universo de discurso. A lógica de predicados também permite a
definição de símbolos funcionais (funções), que podem ser utilizados
para representar elementos do universo de discurso sem a necessidade
de nomeá-lo. O próximo exemplo ilustra a utilização de símbolos
funcionais e constantes.

\begin{Example}
Considere como universo de discurso o conjunto $H$ de todas os seres
humanos, as constantes \textit{Hermengarda} e \textit{Eudésio} e a
função \textit{mãe}, que a partir de uma constante $h$ que representa um
ser humano retorna a constante que denota a mãe de $h$. Se
considerarmos que \textit{Hermengarda} é mãe de \textit{Eudésio}, temos que ao
aplicarmos a função \textit{mãe} a constante \textit{Eudésio} o
resultado será \textit{Hermengarda}.

Note que podemos nos referir ao mesmo elemento usando uma constante
(como, por exemplo, \textit{Hermengarda}) ou utilizando símbolos
funcionais (como, por exemplo, \textit{mãe(Eudésio)}.
\end{Example}

\subsection{Predicados}

Predicados descrevem propriedades que elementos do universo de
discurso podem ou não possuir portanto, possuem valor verdadeiro ou
falso. A seguir apresentamos alguns exemplos de predicados.

\begin{Example}
Vamos considerar o argumento dedutivo apresentado no início deste
capítulo, repetido abaixo:

\begin{table}[h]
  \begin{tabular}{|l|c|}
    \hline
    Sentença & Fórmula \\ \hline
    Todo homem é mortal & $A$ \\
    Sócrates é um homem & $B$ \\
    Sócrates é mortal & $C$ \\\hline
  \end{tabular}
  \centering
\end{table}
Note que nestas sentenças existe uma propriedade:
\textit{mortal}. Logo, ao formalizarmos este argumento,
\textit{mortal} será um predicado que descreverá a propriedade de
``ser mortal'' dos elementos do universo de discurso sobre o qual esta
fórmula está sendo interpretada.

Como outros exemplos de predicados, considere  $x > 10$ que é um exemplo de um predicado e seu
valor lógico depende do valor da variável $x$. Note que, além de
possuir a variável $x$, o predicado $x > 10$ também envolve uma
constante: $10$. Evidentemente,
predicados podem envolver diversas variáveis como $x > y$ ou
apenas constantes, como em $10 < 4$.
\end{Example}

Usualmente representamos predicados de maneira concisa como em $F(x)$,
em que $F$ é o símbolo que representa uma certa
propriedade. Considerando a propriedade \textit{mortal}, esta poderia
ser representada pelo predicado $M(x)$, que pode ser lido como ``$x$ é
mortal''. Predicados podem ter uma quantidade $n \geq 0$ de
parâmetros. Quando um predicado possui nenhum parâmetro, dizemos que
este é uma variável proposicional.

\subsection{Quantificadores}

Existem dois quantificadores na lógica de predicados: o quantificador universal,
representado pelo símbolo $\forall$, e o quantificador existencial,
representado pelo símbolo $\exists$.

Na lógica de predicados utilizamos variáveis para representar objetos
arbitrários do universo de discurso em questão. Por exemplos, se
desejamos especificar uma propriedade da álgebra, uma variável (por
exemplo, $x$) representa um número qualquer. Se a propriedade se
refere a geometria, variáveis podem representar objetos geométricos,
como pontos, triângulos, etc.

Se $P(x)$ é uma fórmula qualquer da lógica de predicados,
representamos a sentença ``todo $x$ possui a propriedade $P$'', por
$\forall x.P(x)$. De maneira similar, representamos a sentença ``algum
$x$ possui a propriedade $P$'' por $\exists x.P(x)$.

Dizemos que a fórmula $\forall x.P(x)$ é considerada verdadeira se para todo
elemento do universo de discurso em questão a propriedade $P$ é
verdadeira. Por sua vez, a fórmula $\exists x.P(x)$ é considerada
verdadeira se pelo menos um elemento do universo de discurso torna a
propriedade $P$ verdadeira. A seguir apresentamos alguns exemplos.

\begin{Example}
Considere o seguinte universo de discurso $U = \{\text{Zeus,Sócrates}\}$,
que a constante Zeus representa um deus da mitologia grega e Sócrates
o conhecido filósofo. Além disso, considere o predicado $M(x)$ que é
verdadeiro se ``$x$ é um mortal''. Desta forma, temos que a fórmula
$\forall x. M(x)$ é falsa em $U$, já que nem todo elemento deste
conjunto torna o predicado $M$ verdadeiro\footnote{O elemento Zeus torna
este predicado falso, já que, este representa o deus grego, que é
imortal.}.

Porém, se considerarmos o universo de discurso $F = \{\text{Sócrates, Platão}\}$, temos que
a fórmula $\forall x. M(x)$ é verdadeira, visto que todos os elementos
de $F$ satisfazem a propriedade $M$. Em ambos os conjuntos $U$ e $F$ a
fórmula $\exists x. M(x)$ é verdadeira, visto que há pelo menos um
elemento nestes conjuntos que representa um mortal.
\end{Example}

\begin{Example}
Neste exemplo vamos considerar a tarefa de interpretar a validade de
algumas fórmulas envolvendo o predicado $>$ sobre
números. Estas fórmulas são: $\forall x. x > 0$ e $\forall x. \exists
y. x > y$.

Inicialmente, vamos considerar como universo de discurso o
conjunto dos números naturais. A primeira fórmula é \textit{falsa}
pois, temos que o número $0 \in \mathbb{N}$ não é maior que $0$.

A segunda fórmula também é falsa pois esta especifica que para qualquer número
natural $x$, existe $y$ tal que $x > y$, o que não é verdadeiro para
$x = 0$. Porém, ao considerarmos o conjunto dos números inteiros,
$\mathbb{Z}$, temos que a primeira fórmula é falsa (porquê?) e a
segunda verdadeira, visto que no conjunto dos números inteiros, para
qualquer $x$ existe um número menor que $x$.

Considerando qualquer conjunto numérico a seguinte propriedade é
falsa: $\exists y. \forall x. y > x$, já que esta especifica que
existe algum valor $y$ que é maior que qualquer outro valor $x$.
\end{Example}

\subsection{Formalizando sentenças}

Para a formalização de sentenças utilizando a lógica de predicados
devemos especificar o universo de discurso, a interpretação de
predicados e dos símbolos funcionais que podem ser utilizados. Os
próximos exemplos ilustram a utilização destes conceitos na
formalização de sentenças na língua portuguesa.

\begin{Example}
Nos próximos
exemplos, vamos considerar sentenças envolvendo o predicado $C(x,y)$,
que denota ``$x$ conhece $y$'', o predicado $G(x,y)$ que representa
``$x$ gosta de $y$'',  a função \textit{mãe} que possui significado
óbvio. O universo de discurso considerado será, novamente, o conjunto
de todos os seres humanos.
\begin{itemize}
  \item A sentença ``Todo mundo gosta de alguém'' pode ser
    representada como: $\forall x. \exists y. G(x,y)$.
  \item A sentença ``Astobaldo não gosta de sua mãe'' pode ser
    representada como $\neg
    G(\text{Astobaldo},\textit{mãe}(\text{Astobaldo}))$.
  \item A sentença ``Ninguém gosta de todo mundo'' pode ser
    formalizada como $\neg \exists x. \forall y. G(x,y)$. Note que
    esta sentença é equivalente a ``Não existe alguém que goste de
    todo  mundo''.
  \item A sentença ``Todos gostam da mãe de Carlos'' pode ser
    representada como $\forall x. G(x, \text{\textit{mãe}(Carlos))}$.
  \item A sentença ``Todos que conhecem Clementino, não gostam da mãe
    dele'' pode ser representada como $\forall
    x. C(x,\text{Clementino}) \to \neg G(x, \textit{mãe}(\text{Clementino}))$.
\end{itemize}
\end{Example}

\section{Exercícios}

\begin{enumerate}
  \item Considere como universo de discurso o conjunto de todos os
    seres humanos, e que \textit{Holmes} e \textit{Moriarty} são
    constantes. Além disso, considere o predicado $C(x,y)$ que denota
    ``$x$ pode capturar $y$''. Com base no apresentado, represente as
    seguintes sentenças como fórmulas da lógica de predicados.
    \begin{enumerate}
      \item Holmes pode capturar qualquer um que pode capturar Moriarty.
      \item Holmes pode capturar alguém que Moriarty pode capturar.
      \item Se alguém pode capturar Moriarty, então Holmes também
        pode.
      \item Ninguém pode capturar Holmes, a menos que possa capturar
        Moriarty.
      \item Qualquer um que pode capturar Holmes pode capturar todos
        que Holmes pode capturar.
    \end{enumerate}
    \item Expresse as seguintes frases utilizando l\'ogica de predicados.
	      Para isso, crie predicados, fun\c{c}\~oes e constantes do dom\'inio
	      de interpreta\c{c}\~ao que julgar adequados.
	\begin{enumerate}
		\item Quem faz exerc\'icios tem melhor qualidade de vida.
		\item Alunos n\~ao gostam de fazer provas.
		\item Nem tudo que reluz \'e ouro.
		\item Quem conhece Godofredo o adora.
		\item N\~ao conhe\c{c}o quem n\~ao odeie as brincadeiras de Eud\'esio.
		\item Ningu\'em visita Hermengarda, a menos que ela esteja af\^onica.
	\end{enumerate}
    \item Considerando como universo de discurso o conjunto de alunos
      e professores de uma universidade e os seguintes predicados:

      \begin{table}[h]
           \begin{tabular}{|c|l|}
             \hline
             $A(x,y)$ & $x$ admira $y$\\
             $S(x,y)$ & $x$ estava presente em $y$\\
             $P(x)$    & $x$ é um professor\\
             $E(x)$    & $x$ é um estudante \\
             $L(x)$    &  $x$ é uma aula \\ \hline
           \end{tabular}
           \centering
      \end{table}

      e a constante \textit{Maria}, represente as seguintes sentenças
      como fórmulas da lógica de predicados.
      \begin{enumerate}
          \item Maria admira todo professor.
           \item Algum professor admira Maria.
           \item Maria admira a si própria.
           \item Nenhum estudante estava presente em todas as aulas.
           \item Nenhuma aula teve a presença de todos os estudantes.
           \item Nenhuma aula teve a presença de qualquer estudante.
      \end{enumerate}
\end{enumerate}

\section{Sintaxe da lógica de predicados}

A seção anterior teve como objetivo mostrar como codificar sentenças
como fórmulas da lógica de predicados e introduziu, de maneira
informal, a sintaxe e como fórmulas
são interpretadas em um determinado universo de
discurso. Nesta seção vamos definir de maneira precisa a sintaxe da
lógica de predicados, para na próxima seção definirmos a semântica de
fórmulas bem formadas nesta lógica.

Ao observarmos com atenção os exemplos de fórmulas, podemos perceber
que estas são compostas de componentes de dois tipos: valores que
representam elementos do universo de discurso e componentes
lógicos. Damos o nome de \textit{termos} aos componentes da sintaxe da
lógica de predicados que representam elementos do universo de
discurso.

\subsection{Termos}

O conjunto $\mathcal{T}$ de termos da lógica de predicados é formado
por variáveis, constantes e funções aplicadas a ambos. A seguir
apresentamos a definição formal do conjunto $\mathcal{T}$.

\begin{Definition}[Conjunto de Termos da Lógica de Predicados]\label{termdef}
O conjunto $\mathcal{T}$ de termos da lógica de predicados é definido
recursivamente como:
\begin{itemize}
  \item Seja $\mathcal{V}$ o conjunto de todas as variáveis da lógica
    de predicados. Então $\mathcal{V} \subseteq \mathcal{T}$, isto é,
    toda variável é um termo.
  \item Seja $\mathcal{C}$ o conjunto de todas as constantes da lógica
    de predicados. Então, $\mathcal{C}\subseteq\mathcal{T}$, isto é,
    toda constante é um termo.
  \item Seja $\mathcal{F}$ o conjunto de todos os símbolos funcionais
    da lógica de predicados. Considere que $f\in\mathcal{F}$ é uma
    função de aridade\footnote{Denomina-se por aridade o número de
      parâmetros de uma função.} $n$, $n\geq 1$, e que $t_1,...,t_n \in
    \mathcal{T}$. Então, $f(t_1,...,t_n)\in\mathcal{T}$, isto é, toda
    função de aridade $n$ aplicada a $n$ termos é também um termo.
\end{itemize}
Todos os elementos de $\mathcal{T}$ podem ser construídos pelas regras anteriores.
\end{Definition}
A seguir apresentamos alguns exemplos de termos e como estes são
construídos utilizando a definição \ref{termdef}.
\begin{Example}
Suponha que $a,b$ e $c$ sejam constantes de algum universo de
discurso, $f$ e $g$ duas funções de aridade 1 e 2, respectivamente. As
expressões seguintes são termos da lógica de predicados:
\begin{enumerate}
  \item $g(a,b)$
  \item $f(g(f(a),c))$
\end{enumerate}

A fórmula 1) pode ser construída da seguinte maneira: primeiramente,
$a$ e $b$, por serem constantes, são termos. Finalmente, $g(a,b)$ é um
termo pois a função $g$, de aridade $2$, está aplicada a dois termos.
Por sua vez, a fórmula 2) é bem formada, pois tanto $a$ quanto $c$ são
termos (já que ambos são constantes). Sendo assim, $f(a)$ é um termo,
já que a função $f$, de aridade 1, está aplicada a um termo. De
maneira similar, temos que $g(f(a),c)$ é um termo pois, a função $g$
(de aridade 2) está aplicada a $f(a)$ e $c$. Finalmente,
$f(g(f(a),c))$ é um termo pois, a função $f$, de aridade 1, está
aplicada a $g(f(a),c)$.

As seguintes expressões não podem ser consideradas termos já que não
respeitam a aridade das funções $f$ e $g$: $f(a,c)$, $g(f(a))$.
\end{Example}

\subsection{Fórmulas}

A partir da definição de termos, podemos definir o conjunto de
fórmulas bem formadas da lógica de predicados,
$\mathbb{F}$.

\begin{Definition}[Fórmulas bem formadas]\label{predsyntaxdef}
O conjunto de fórmulas bem formadas da lógica de predicados,
$\mathbb{F}$, pode ser definido recursivamente da seguinte maneira:
\begin{enumerate}
  \item Seja $p$ um predicado de aridade $n \geq 0$ e
    $t_1,...,t_n\in\mathcal{T}$ termos. Então,
    $p(t_1,...,t_n)\in\mathbb{F}$, isto é, $p(t_1,...,t_n)$ é uma
    fórmula (tais fórmulas são usualmente denominadas de fórmulas atômicas).
  \item $\bot,\top \in \mathbb{F}$.
  \item Sejam $\alpha, \beta \in \mathbb{F}$ fórmulas
    quaisquer. Então:
    \begin{enumerate}
      \item $\neg \alpha \in \mathbb{F}$.
      \item $\alpha \circ \beta \in \mathbb{F}$, em que
        $\circ\in\{\lor,\land,\to,\leftrightarrow\}$.
      \item Se $x \in \mathcal{V}$ (isto é, $x$ é uma variável),
        então: $\forall x. \alpha \in \mathbb{F}$ e $\exists x. \alpha
        \in \mathbb{F}$.
      \item $(\alpha)\in\mathbb{F}$.
    \end{enumerate}
    Toda fórmula bem formada da lógica de predicados pode ser
    construída utilizando as regras anteriores.
\end{enumerate}
\end{Definition}

A seguir apresentamos alguns exemplos de fórmulas bem formadas.
\begin{Example}
Primeiramente, considere os seguintes exemplos de fórmulas atômicas:
\begin{enumerate}
  \item $f$ --- um predicado de aridade 0 (isto é, uma variável
    proposicional).
  \item pai(Adão,Abel) --- um predicado de aridade 2 (pai) e duas
    constantes: Adão e Abel. Esta fórmula poderia representar a
    sentença ``Adão é pai de Abel''.
  \item casados(João,irmã(Maria)) --- um predicado de aridade 2
    (casados), aplicado a constante João e ao termo irmã(Maria), em
    que irmã é uma função. Esta fórmula poderia representar a sentença
    ``João é casado com a irmã de Maria''.
\end{enumerate}
A seguir apresentamos alguns exemplos de fórmulas não atômicas.
\begin{enumerate}
  \item pai(Adão,Abel) $\land$ pai(Adão,Caim). Esta fórmula representa
    a sentença ``Adão é pai de Abel e Caim''.
  \item $\exists x. $tia($x$,Joaquim). Esta fórmula representa a
    sentença ``Joaquim tem uma tia''.
  \item $\forall x. $gosta($x$,mãe($x$)) Esta fórmula representa a
    sentença ``Todos gostam de sua respectiva mãe''.
\end{enumerate}
\end{Example}

Assim como na lógica proposicional, utilizaremos precedências entre
conectivos e quantificadores na lógica de predicados para evitar
o uso excessivo de parênteses. Para os conectivos, utilizaremos as
mesmas regras de precedência da lógica proposicional e consideraremos
que quantificadores possuem a mesma precedência que o conectivo
$\neg$.

\subsection{Variáveis Livres e Ligadas}

Antes de apresentarmos os conceitos de variável livre e ligada,
devemos definir de maneira precisa o escopo de um quantificador em uma
fórmula.
\begin{Definition}[Escopo de quantificadores]
Seja $x\in\mathcal{V}$ uma variável e $\alpha \in\mathbb{F}$ uma
fórmula. Dizemos que o escopo da variável $x$ em $\forall x. F$ é a
fórmula $F$. De maneira similar, o escopo de $x$ em $\exists x. F$ é
também a fórmula $F$.
\end{Definition}
Dizemos que uma variável é livre em uma certa fórmula se esta não está
no escopo de nenhum quantificador. Uma variável que não é livre é dita
ser ligada. O próximo exemplo ilustra estes conceitos.
\begin{Example}\label{freeboundexample}
  Considere a seguinte equação envolvendo símbolos da aritmética sobre
  números naturais:
  \[
  x = 5y
  \]
  Esta equação não pode ser considerada verdadeira ou falsa, uma vez
  que o seu valor lógico depende dos valores atribuídos às variáveis
  $x$ e $y$. Note que, tanto $x$ quanto $y$, são variáveis que ocorrem
  livres na fórmula anterior. Considere a seguinte variação da fórmula
  anterior:
 \[
 \exists y. x = 5y
 \]
 Note que o valor lógico da fórmula acima depende apenas do valor de
 $x$ e não de $y$. Esta fórmula pode ser descrita na língua portuguesa
 sem mencionarmos a variável $y$ como ``$x$ é um múltiplo de 5''. O
 fato do valor lógico desta fórmula não depender da variável $y$ é uma
 consequência desta ser uma variável ligada.
\end{Example}
De maneira simples, podemos determinar se uma variável $x$ é livre ou
ligada em uma fórmula utilizando a função $fv$, que calcula o
conjunto de variáveis livres de uma dada fórmula. Esta
é definida a seguir.
\begin{Definition}[Variáveis livres]\label{freevars}
Seja $t\in\mathcal{T}$ um termo qualquer. O conjunto de variáveis
livres em $t$, $fv_{\mathcal{T}}(t)$, é definido recursivamente como:
\[
fv_{\mathcal{T}}(t)=\left\{
                             \begin{array}{ll}
                               \{x\} & \text{se }t = x, \text{ para
                                 algum }x \in \mathcal{V},\text{ isto é,
                               se }t\text{ é uma variável}. \\
                               \emptyset & \text{se }t = c, \text{
                                 para algum } c\in\mathcal{C}, \text{
                                 isto é, se }t\text{ é uma constante}.\\
                               \bigcup_{i = 1}^n fv_{\mathcal{T}}(t_i)
                               & \text{se }t = f(t_1,...,t_n), \text{
                                 em que }t_1,...,t_n\in\mathcal{T},
                               \text{ e }f\text{ possui aridade }n.
                             \end{array}
                          \right .
\]
Dada uma fórmula $\alpha\in\mathbb{F}$, o conjunto de variáveis livres
de $\alpha$, $fv(\alpha)$, é definido recursivamente como:
\[
fv(\alpha)=\left\{
                     \begin{array}{ll}
                       \bigcup_{i = 1}^n fv_{\mathcal{T}}(t_i) & \text{se
                       }t = p(t_1,...,t_n) \text{ em que }p \text{
                         possui aridade }n\geq 0.\\
                       \emptyset &  \text{se }\alpha = \top \text{ ou
                       }\alpha = \bot\\
                       fv(\beta) & \text{se }\alpha = \neg \beta\\
                       fv(\beta)\cup fv(\gamma) & \text{se }\alpha =
                       \beta\circ\gamma,
                       \circ\in\{\lor,\land,\to,\leftrightarrow\}.\\
                       fv(\beta) - \{x\} & \text{se }\alpha = \forall
                       x.\beta \text{ ou } \alpha = \exists x.\beta.
                     \end{array}
                  \right .
\]
Uma fórmula $\alpha\in\mathbb{F}$ em que $fv(\alpha) = \emptyset$ é
dita ser \emph{fechada}. Caso contrário, \emph{aberta}.
\end{Definition}
O leitor deve ter notado que não apresentamos uma função para o
cálculo de variáveis ligadas de uma fórmula. Esta é deixada como
exercício (veja o exercício \ref{boundex} da seção \ref{exsyntaxpred}).

\subsection{Substituição}

Conforme discutido no exemplo \ref{freeboundexample}, fórmulas que
possuem variáveis livres só podem possuir significado se estas
forem substituídas por ``valores concretos'', isto é, termos
cujo significado não depende de nenhum valor externo à definição da
fórmula em questão.

De maneira mais formal, para atribuir significado a fórmulas com
variáveis livres, estas precisam ser substituídas por termos que não
possuem este tipo de variável. A operação de substituir uma variável
por um termo qualquer é denominada \textit{substituição}.

\begin{Definition}[Substituição]
Sejam $x\in\mathcal{V}$ e $t,s\in\mathcal{T}$ uma variável e termos,
respectivamente. Denotamos por $[x\mapsto s]\,t$ o termo obtido pela
substituição de toda ocorrência livre de $x$ em $t$ por $s$. Mais
formalmente (considere que $y\in\mathcal{V}$, $c\in\mathcal{C}$ e que
$x \equiv y$ é verdadeiro se $x$ for igual a variável $y$):
\begin{equation*}
\begin{array}{lclc}
\lbrack x\mapsto s\rbrack \, y & = & \left\{
                                         \begin{array}{ll}
                                           s & \text{se } x \equiv y\\
                                           y & \text{caso contrário}.
                                         \end{array}
                                     \right . & (1)\\
\lbrack x\mapsto s\rbrack\,c & = & c & (2)\\
\lbrack x\mapsto s\rbrack\,f(t_1,...,t_n) & = & f(\lbrack x\mapsto s\rbrack\,t_1,...,
\lbrack x\mapsto s\rbrack\,t_n)  & (3) \\
\end{array}
\end{equation*}
Utilizando a definição de substituição para termos, podemos definir a
substituição para fórmulas quaisquer (em que $\alpha,\beta
\in\mathbb{F}, \circ\in\{\lor,\land,\to,\leftrightarrow\}$):
\[
\begin{array}{lclc}
\lbrack x \mapsto s\rbrack p(t_1,...,t_n) & = & p(\lbrack x \mapsto
s\rbrack\,t_1,...,\lbrack x \mapsto s\rbrack\,t_n)  & (4)\\
\lbrack x \mapsto s\rbrack \top & = & \top  & (5)\\
\lbrack x \mapsto s\rbrack \bot & = & \bot & (6) \\
\lbrack x \mapsto s\rbrack (\neg \alpha) & = & \neg (\lbrack x \mapsto
s\rbrack\,\alpha) & (7) \\
\lbrack x \mapsto s\rbrack (\alpha \circ \beta) & = & (\lbrack x
\mapsto s\rbrack\alpha) \circ (\lbrack x \mapsto s\rbrack \beta) & (8)\\
\lbrack x \mapsto s\rbrack (\forall y. \alpha) & = & \left\{
                                                                                       \begin{array}{ll}
                                                                                         \forall
                                                                                         y. \lbrack
                                                                                         x
                                                                                         \mapsto
                                                                                         s\rbrack
                                                                                         \alpha
                                                                                         &
                                                                                         \text{se
                                                                                         }x\not\equiv
                                                                                         y
                                                                                         \\
                                                                                         \forall
                                                                                         y. \alpha
                                                                                         &
                                                                                         \text{se
                                                                                         }x
                                                                                         \equiv y
                                                                                        \end{array}
                                                                                   \right. &
                                                                                   (9)\\
\lbrack x \mapsto s\rbrack (\exists y. \alpha) & = & \left\{
                                                                                       \begin{array}{ll}
                                                                                         \exists
                                                                                         y. \lbrack
                                                                                         x
                                                                                         \mapsto
                                                                                         s\rbrack
                                                                                         \alpha
                                                                                         &
                                                                                         \text{se
                                                                                         }x\not\equiv
                                                                                         y
                                                                                         \\
                                                                                         \exists
                                                                                         y. \alpha
                                                                                         &
                                                                                         \text{se
                                                                                         }x
                                                                                         \equiv y
                                                                                        \end{array}
                                                                                   \right. & (10)
\end{array}
\]
Note que as equações que definem a substituição para fórmulas com
quantificadores proíbem que a substituição seja realizada sobre
variáveis ligadas.
\end{Definition}
O seguinte ilustra a operação de substituição sobre termos e fórmulas.
\begin{Example}
Seja $x \in \mathcal{V}$ uma variável e $f(a)$ um termo ($a$ é uma
constante). Temos que o resultado de aplicar a substituição $\lbrack x \mapsto
f(a)\rbrack$ ao termo $g(a,h(x,a))$ é $g(a,h(f(a),a))$. O resultado de
aplicar esta mesma substituição à fórmula $\forall y. g(y,x)$ é
$\forall y. g(y,f(a))$. De maneira similar, a aplicação da
substituição $\lbrack x \mapsto g(a,a) \rbrack$ à fórmula $\exists
x. f(x)$ produz o termo $\exists x. f(x)$, já que este não possui
variáveis livres.
\end{Example}

\section{Exercícios} \label{exsyntaxpred}

\begin{enumerate}
  \item Apresente a definição recursiva para uma função que calcula o
    conjunto de variáveis ligadas de uma fórmula da lógica de
    predicados. \label{boundex}
  \item Para cada um dos termos da lógica de predicados a seguir, use
    a definição de fórmulas bem formadas (definição
    \ref{predsyntaxdef}) para justificar o porquê estes podem ser
    considerados fórmulas bem formadas. Considere que os símbolos $f,
    g$ são funções de aridade 1 e 2, respectivamente, que $a,b$ são
    constantes e $p, q$ são predicados de aridade 1 e 2
    respectivamente.
    \begin{enumerate}
      \item $f(a)$
      \item $\forall x. q(f(a),x)$
      \item $\exists y. p(y) \land \forall x. q(f(a),g(x,b))$.
    \end{enumerate}
    \item Obtenha o conjunto de variáveis livres para cada uma das
      fórmulas seguintes utilizando a definição
      \ref{freevars}. Considere que $a$ e $b$ são constantes.
    \begin{enumerate}
		\item $\forall x. (p(x,z)\rightarrow q(y)) \land
                  s(a,x)$
                \item $\exists y. p(y,z) \land \forall
                  x. q(f(a),g(x,b))$.
                \item $\exists y. p(y) \land \forall x. q(f(a),g(x,b))$.
    \end{enumerate}
\end{enumerate}

\section{Semântica da lógica de predicados}

Na lógica proposicional, para ser possível determinar o valor lógico
de uma fórmula basta uma interpretação para as variáveis nela
contidas. Isso é feito atribuindo, às variável da fórmula, todas as
possíveis combinações de verdadeiro ($T$) ou falso ($F$). Porém, como
apresentado informalmente na seção \ref{intropredlogic}, para
interpretarmos fórmulas da lógica de predicados, devemos possuir um
universo de discurso (que dá significado às constantes) e conjuntos de
relações e funções que atribuem significado aos símbolos predicativos
e funcionais, respectivamente.Isto é, para definirmos o significado de
fórmulas da lógica de predicados, necessitamos de uma
\textit{estrutura}, conceito este apresentado na definição seguinte.

\begin{Definition}[Estrutura]
Uma estrutura é uma tripla $I = (U,R,F)$, em que:
\begin{itemize}
  \item $U$ é um conjunto não vazio tal que para cada constante $a \in
    \mathcal{T}$, temos que $a^I\in U$, em que $a^I$ é a denotação de
    $a$ em $U$.
  \item $R$ é um conjunto de relações, em que, para cada símbolo
    predicativo $p$ de aridade $n \geq 1$, existe uma relação $n$-ária
    $p^I \subseteq U^n$.
  \item $F$ é um conjunto de funções, em que, para cada símbolo
    funcional $f$, de aridade $n\geq 1$, existe uma função $f^I :
    U^n\to U \in F$.
\end{itemize}
\end{Definition}

A definição de uma função para atribuição significado a fórmulas da
lógica de predicados é apresentada a seguir. Primeiramente,
apresentamos a definição da semântica de um termo. Como termos denotam
elementos do universo de discurso, a função semântica para termos
deverá produzir como resultado um elemento do conjunto $U$,
considerando uma estrutura $I=(U,R,F)$.

\begin{Definition}[Semântica de termos]
Seja $I=(U,R,F)$ uma estrutura. Definimos a função $\varepsilon : \mathcal{T}
\to U$, que define a semântica de um termo $t$ como um elemento $u\in
U$, recursivamente como:
\[
\begin{array}{lcllc}
\varepsilon(a) & = & a^I, & \text{em que }a^I\in U & (1)\\
\varepsilon(f(t_1,...,t_n)) & = &
f^I(\varepsilon(t_1),...,\varepsilon(t_n)) & \text{em que }f^I\in
F\text{ e } t_1,...,t_n \in \mathcal{T} & (2)
\end{array}
\]
\end{Definition}
Note que apesar de variáveis serem consideradas termos, não
apresentamos a semântica destas, uma vez que termos possuem somente
variáveis livres e, como já citado anteriormente, apresentaremos a
semântica apenas de fórmulas fechadas. Isto não constitui uma
limitação, uma vez que, substituições podem ser utilizadas para
eliminar variáveis livres de fórmulas.

Antes de apresentarmos a função semântica de fórmulas da lógica de
predicados, vamos considerar um exemplo para ilustrar a semântica de
termos desta lógica.

\begin{Example}
Suponha um universo de discurso em que objetos sejam países e cidades,
dentre as quais citamos \textit{Rio de Janeiro, Berlim, Nova York,
  Tóquio,} entre outras. Desejamos formalizar as seguintes funções e
constantes envolvendo países e cidades:
\begin{itemize}
   \item \textit{capital}: função de aridade 1 que associa a cada país
     sua respectiva capital. Representaremos, na lógica de predicados,
     a  função \textit{capital} pelo símbolo funcional $cap$. Logo,
     $cap^I = \textit{capital}$.
   \item Representarmos as constantes \textit{Rio de Janeiro, Berlim, Nova York,
  Tóquio} por $RJ, BL, NY$ e $TK$, respectivamente. Além disso,
   consideraremos que a constante Brasil é representada pelo termo
   $BR$ e Alemanha por $GE$.
\end{itemize}
Considere, agora, a tarefa de interpretrar o significado do termo
$cap(GE)$. Utilizando a definição da semântica de termos, temos:
\[
\begin{array}{lcl}
\varepsilon(cap(GE)) & = &\\
cap^I(\varepsilon(GE)) & = & \{\text{pela eq. (2) de }\varepsilon.\}\\
cap^I(GE^I) & = & \{\text{pela eq. (1) de }\varepsilon.\}\\
cap^I(\textit{Alemanha}) & = & \{\text{pela semântica da constante }GE\}\\
\textit{capital}(\textit{Alemanha}) & = & \{\text{pela semântica do
  símbolo funcional }cap.\}\\
\textit{Berlim} & & \{\text{pela semântica da função da função \textit{capital}}\}.
\end{array}
\]
Logo, o termo $cap(GE)$ denota o mesmo elemento (a cidade de Berlim)
que a constante $BL$.
\end{Example}
A seguir, é apresentada a semântica para fórmulas da lógica de
predicados.
\begin{Definition}[Semântica de Fórmulas]\label{predlogicformulasem}
Seja $I=(U,R,F)$ uma estrutura. Definimos a função $\llbracket\_\rrbracket :
\mathbb{F}\to \{T,F\}$, que associa a cada fórmula fechada da lógica de
predicados o seu respetivo valor lógico, recursivamente como (em que
$t_1,...,t_n$ representam termos, $u$ uma constante qualquer, $\alpha$,
$\beta$ fórmulas quaisquer e $\circ\in\{\lor,\land,\to,\leftrightarrow\}$):
\[
\begin{array}{lclc}
\llbracket \bot \rrbracket & = & F & (1)\\
\llbracket \top \rrbracket & = & T & (2)\\
\llbracket p(t_1,...,t_n) \rrbracket & = & (\varepsilon(t_1),...,\varepsilon(t_n))
\in p^I & (3)\\
\llbracket \neg \alpha \rrbracket & = & \neg \llbracket \alpha
\rrbracket & (4) \\
\llbracket \alpha \circ \beta \rrbracket & = & \llbracket \alpha
\rrbracket \circ \llbracket \beta \rrbracket & (5)\\
\llbracket \forall x. \alpha \rrbracket & = & \bigwedge\limits_{u\in
  U}\llbracket [x \mapsto u] \alpha \rrbracket & (6)\\
\llbracket \exists x. \alpha \rrbracket & = & \bigvee\limits_{u\in
  U}\llbracket [x \mapsto u] \alpha \rrbracket & (7)\\
\end{array}
\]
A notação $[x\mapsto u]\alpha$ denota a fórmula $\alpha$ em que toda
ocorrência da variável livre $x$ é substituída pela constante $u$.
\end{Definition}
O próximo exemplo ilustra a utilização das funções semânticas para
lógica de predicados.
\begin{Example}
Considere a seguinte estrutura $I=(U,R,F)$, em que:
\begin{itemize}
  \item $U = \{2,3,4\}$, em que cada um dos números $x \in U$, será
    representado pela constante $x$.
  \item O conjunto $R$ é formado pelos seguintes conjuntos:
  \begin{itemize}
    \item $par = \{2,4\}$, que será representado pelo símbolo
      predicativo $p$, de aridade 1.
    \item $\textit{ímpar} = \{3\}$, que será representado pelo símbolo
      predicativo $i$, de aridade 1.
    \item $M = \{(2,3),(2,4),(3,4)\}$, que será representado pelo
      símbolo predicativo $m$, de aridade 2.
  \end{itemize}
  \item O conjunto $F$ é vazio, isto é, não existem funções nesta estrutura.
\end{itemize}
Tendo apresentado o significado dos símbolos não funcionais em termos
da estrutura $I$, considere a tarefa de calcular o valor lógico da
seguinte fórmula $\forall x. p(x) \lor i(x)$. O cálculo de cada uma destas, utilizando a definição
\ref{predlogicformulasem}, é mostrada passo-a-passo a seguir.
\[
\begin{array}{lcl}
\forall x . p(x) \lor i(x) & = &\\
(\llbracket p(2)\lor i(2) \rrbracket) \land (\llbracket p(3)\lor i(3)
\rrbracket) \land (\llbracket p(4)\lor i(4) \rrbracket) & = &
\{\text{pela eq.} (6)\}\\
(\llbracket p(2) \rrbracket \lor \llbracket i(2) \rrbracket) \land
(\llbracket p(3) \rrbracket \lor \llbracket i(3)
\rrbracket) \land (\llbracket p(4) \rrbracket \lor \llbracket i(4) \rrbracket) & = &
\{\text{pela eq.} (5)\}\\
\begin{array}{lc}
(\varepsilon(2) \in \textit{par} \lor \varepsilon(2) \in
\textit{ímpar}) & \land \\
(\varepsilon(3) \in \textit{par} \lor \varepsilon(3) \in
\textit{ímpar}) & \land \\
(\varepsilon(4) \in \textit{par} \lor \varepsilon(4) \in
\textit{ímpar}) \end{array} & = & \{\text{pela eq. }(3)\} \\
T \land T \land T & = & \{\text{pela def. de }\varepsilon \text{ e }
\textit{par, ímpar}.\} \\
T
\end{array}
\]
Logo, de acordo com a definição \ref{predlogicformulasem}, a fórmula
$\forall x. p(x) \lor i(x)$ é verdadeira para a estrutura $I$.
\end{Example}
Com base na semântica de fórmulas, podemos classificá-las de maneira
similar ao que fazemos com a lógica proposicional. A próxima definição
formaliza estes conceitos.
\begin{Definition}[Classificação de fórmulas]
Seja $\alpha$ uma fórmula bem formada da lógica de predicados. Dizemos
que $\alpha$ é satisfazível se existe uma estrutura $I$ tal que
$\llbracket \alpha \rrbracket = T$. De maneira similar, dizemos que
$\alpha$ é falseável se existe uma estrutura tal que $\llbracket \alpha
\rrbracket = F$. Uma fórmula $\alpha$ é dita ser uma tautologia\footnote{Também
chamada por alguns autores de fórmulas válidas} se esta é verdadeira
para toda estrutura $I$. Uma fórmula $\alpha$ é uma contradição se não
existe uma estrutura que a satisfaça. Finalmente, $\alpha$ é uma
contingência se esta for satisfazível e falseável.
\end{Definition}


\section{Dedução natural para lógica de predicados}