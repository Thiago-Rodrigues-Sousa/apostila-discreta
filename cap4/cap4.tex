\chapter{Demonstração de Teoremas}\label{cap4}

\epigraph{A matemática não é uma ciência dedutiva --- isto é um
  clichê. Quando você tenta provar um teorema, você não apenas lista
  as hipóteses, e começa a dedução. O que normalmente fazemos é fazer
  uso de experimentação e tentativa e erro.}{Paul Richard Halmos,
  Matemático.}

\section{Motivação}

Nos capítulos \ref{cap2} e \ref{cap3} foram apresentadas as lógicas
proposicional e de predicados. Para cada uma destas lógicas, estudamos
sua sintaxe, semântica e como verificar consequências lógicas
utilizando dedução natural. Neste capítulo, apresentaremos uma
importante aplicação de tudo que foi visto até o presente momento:
usar estas lógicas para demonstrar teoremas matemáticos.

Mas qual a importância do uso de demonstrações em computação? A única
tecnologia conhecida para garantir a ausência de erros em programas de
computador é provando que este não possui
erros. Evidentemente, isso requer a modelagem de programas em algum
formalismo matemático adequado para esta tarefa, o que está fora do
escopo deste texto. Porém, técnicas elementares de demonstração de
teoremas são a ``base'' para a formalização e verificação de sistemas
computacionais. Logo, é importante que todo estudante de computação
saiba construir e entender demonstrações formais.

\section{Introdução}

Damos o nome de \emph{teorema} a uma sentença matemática que é
verdadeira e pode ser verificada como tal. Teoremas são compostos por
um conjunto, possivelmente vazio, de sentenças, denominadas hipóteses
(ou premissas), que são assumidas como verdadeiras \emph{a priori} e
uma conclusão.
 Normalmente, teoremas
são expressos utilizando variáveis possivelmente livres. Damos o nome
de \emph{instância} de um teorema a uma particular atribuição de
valores às variáveis de um teorema.  A \emph{prova} ou
\emph{demonstração} de um teorema consiste de uma verificação que
mostra que o teorema em questão é verdadeiro, para todas as possíveis
instâncias deste. Note que um teorema só pode ser considerado como
válido se este o for para todas suas instâncias. Para mostrar que um
``teorema''\footnote{Note que uma sentença só pode ser
  considerada um teorema se esta for verdadeira. Afirmar que um
  teorema é falso é apenas um abuso de linguagem utilizado para
  facilitar a exposição deste conceito.} é inválido basta apresentar
uma instância que torna o enunciado deste falso. Damos o nome de
\emph{contra-exemplo} a uma instância que torna uma sentença falsa.

A seguir apresentamos um exemplo que ilustra os conceitos apresentados
no parágrafo anterior.

\begin{Example}
Considere a seguinte sentença matemática:
\begin{center}
\textit{Sejam $x,y$ dois números reais tais que $x > 3$ e $y < 2$. Então, $x^2
- 2y > 5$}.
\end{center}
Esta sentença é um teorema e sua prova será apresentada em um exemplo
posterior. Como esta é um teorema, ela deverá ser composta por um
conjunto de hipóteses e uma conclusão. Note que o enunciado deste
teorema assume que $x,y\in\mathbb{R}$ e que $x > 3$ e $y < 2$. Logo,
estas são as suas hipóteses. A conclusão deste teorema é que
a desigualdade $x^2 - 2y > 5$ deve ser verdadeira. Como um exemplo de
uma possível instância desse teorema são $x = 4$ e $y = 0$ que tornam a
desigualdade $16 - 2.0 > 5$ verdadeira. Evidentemente, caso $x = 3$ e
$y = 2$ (violando, assim, as hipóteses $x > 3$ e $y < 2$) temos que a
conclusão é falsa pois, $9 - 4 = 5 \not> 5$.

Agora, como exemplo de uma sentença inválida, considere:
\begin{center}
\textit{Sejam $x,y$ dois números reais tais que $x > 3$. Então, $x^2
- 2y > 5$.}
\end{center}
Esta sentença não pode ser considerada um teorema por possuir um
contra-exemplo. Seja $x= 4$ e $y = 6$. Temos que $x = 4 > 3$, mas
$16 - 12 \not > 5$, o que torna falsa a sentença em questão.

É importante ter em mente que para demonstrar um teorema devemos
construir uma prova (dedução) de que este é correto para todas as suas
instâncias. Se quisermos mostrar que uma sentença é falsa, basta
apresentar um contra-exemplo.
\end{Example}

Você deve ter percebido que
teoremas possuem a mesma estrutura de sequentes da dedução
natural. Na verdade, todos os sequentes que demonstramos em capítulos
anteriores, são teoremas! Neste capítulo, utilizaremos a dedução
natural para demonstrar a validade de sentenças quaisquer da
matemática. Porém, ao invés de utilizarmos uma notação hierárquica (em
forma de uma árvore), como fizemos com a dedução natural, utilizaremos
uma notação \textit{estruturada}, no sentido que organizaremos
demonstrações em blocos, similares à blocos de comandos presentes na
maioria das linguagens existentes (como C/C++, Java, Python,
etc.), visando facilitar a construção e o entendimento de provas.

\section{Técnicas de Demonstração de Teoremas}

Nesta seção apresentaremos as técnicas para demonstração de teoremas,
que essencialmente, são as regras já vistas em nosso estudo de dedução natural.
Visando facilitar a tarefa de construir demonstração corretas e similares
às encontradas em textos de matemática, dividiremos a tarefa de
provar um teorema em duas partes relacionadas: 1) construção de um
rascunho e 2) elaboração de um texto, a partir deste rascunho\footnote{A
  técnica que adotaremos neste texto para construção de demonstrações
  é a apresentada no livro de Daniel Velleman \cite{Velleman06}.}.

O rascunho é utilizado para realizar as deduções que formam a
demonstração de um teorema. Normalmente este é dividido em duas
colunas: a coluna de hipóteses e a de conclusão. Na coluna de hipóteses
encontram-se todas as hipóteses e suposições feitas durante a
demonstração e a coluna de conclusão registra qual fórmula devemos
deduzir a partir das hipóteses, para estabelecer que o teorema em
questão é realmente verdadeiro.

Mas, como construir um rascunho para um dado teorema? Como produzir um
texto a partir deste rascunho? Ambas estas perguntas são respondidas
considerando o que \cite{Velleman06} chama de \emph{estratégia de
  prova}. Uma estratégia de prova consiste de modelos para construção de
rascunho e de textos que são aplicáveis a um certo tipo de hipótese ou
conclusão. Veremos que a escolha de qual estratégia de prova será
utilizada depende de quais conectivos / quantificadores a fórmula em
questão possui.

Denominamos de \emph{estratégia para utilização de
hipóteses}, técnicas que permite-nos deduzir novas fórmulas a partir de
hipóteses. Estas estratégias correspondem às regras de eliminação de
quantificadores e conectivos da dedução natural. Por sua vez,
denominamos de \emph{estratégia para demonstrar uma conclusão}
técnicas que nos permitem deduzir uma fórmula com um certo conectivo /
quantificador. Usualmente, estas técnicas permitem transformar o
problema de demonstrar uma fórmula $\alpha$ em problemas mais
simples. Estratégias para demonstrar conclusões correspondem às regras
de introdução de conectivos / quantificadores da dedução natural.

Os modelos de rascunho presentes em uma estratégia de demonstração
dividem-se em duas partes, a primeira mostra um esquema de rascunho
antes de usar a estratégia e a segunda mostra o rascunho
resultante. Já o modelo de texto, usualmente apresenta ``buracos''  a
serem preenchidos com o texto de alguma sub-demonstração a ser
realizada. Partes a serem preenchidas com sub-demonstrações são
indicadas usando colchetes ('[' e ']').

A demonstração de um teorema deve seguir os seguintes passos:
\begin{enumerate}
  \item Identifique as hipóteses e conclusão de um teorema e
    expresse-os como fórmulas da lógica.
  \item A partir da representação do teorema como um conjunto de
    fórmulas da lógica, construa o rascunho que demonstra o teorema
    em questão.
  \item A partir do rascunho produzido, elabore o texto final da demonstração.
\end{enumerate}

As próximas seções apresentam
cada uma das técnicas para os conectivos e quantificadores e exemplos
que ilustram o uso destas estratégias.

\subsection{Estratégias para Implicação $(\to)$}

A primeira estratégia de demonstração que veremos é provavelmente a
que será  mais utilizada. Esta permite demonstrar implicações lógicas
e é equivalente à regra de introdução da implicação da dedução
natural.

\begin{ProofStrategy}[Para provar uma conclusão da forma
  $\alpha\to\beta$]\label{imp1}
Suponha que $\alpha$ é verdadeiro e então prove $\beta$.
\begin{flushleft}
 \textbf{Rascunho}.\\
\verb| |\\

\textit{Rascunho antes de usar a estratégia}.
\verb| |\\
\begin{tabular}{ll}
Hipóteses & Conclusão \\
$\gamma_1,\gamma_2,...,\gamma_n$ & $\alpha\to \beta$\\
\end{tabular}

\textit{Rascunho depois de usar a estratégia}.
\verb| |\\
\begin{tabular}{ll}
Hipóteses & Conclusão \\
$\gamma_1,\gamma_2,...,\gamma_n$ & $\beta$\\
$\alpha$                                              & \\
\end{tabular}
\end{flushleft}
\begin{flushleft}
\textbf{Texto:}\\
\textit{Suponha que $\alpha$}.\\
\verb|    |[\textit{Prova de $\beta$}]\\
\textit{Portanto, se $\alpha$ então $\beta$}.
\end{flushleft}
\end{ProofStrategy}
O exemplo a seguir utiliza esta estratégia para construção de um
teorema simples.
\begin{Example}
Considere a tarefa de demonstrar o seguinte teorema:
\begin{flushleft}
Suponha que  $a,b\in\mathbb{R}$. Se $0 < a < b$ então $a^2 < b^2$.
\end{flushleft}
Seguindo os passos descritos anteriormente, primeiro devemos
representar as hipóteses e a conclusão deste teorema como fórmulas da
lógica.
O teorema em questão possui como hipóteses que $a,b\in\mathbb{R}$ e a sua
conclusão é a fórmula:
\[
0 < a < b \to a^2 < b^2
\]
A partir da representação das hipóteses e da conclusão como fórmulas
da lógica, devemos proceder com a elaboração do rascunho.
Inicialmente, o rascunho possui a seguinte forma:
\begin{flushleft}
\begin{tabular}{ll}
Hipóteses & Conclusão \\
$a,b\in\mathbb{R}$ & $0 < a < b \to a^2 < b^2$\\
\end{tabular}
\end{flushleft}
Uma vez que a conclusão é uma implicação, podemos utilizar a
estratégia de provas \ref{imp1}. Abaixo é apresentado o rascunho após
a utilização desta estratégia:
\begin{flushleft}
\begin{tabular}{ll}
Hipóteses & Conclusão \\
$a,b\in\mathbb{R}$ & $ a^2 < b^2$\\
$0 < a < b$ & \\
\end{tabular}
\end{flushleft}
Evidentemente, se $0 < a < b$ então $a > 0$, $a < b$, $b > 0$. Como
tanto $a$ quanto $b$ são maiores que zero, podemos multiplicar ambos
os lados de $a < b$ por cada um destes valores. Multiplicando por $a$,
obtemos $a^2 < ab$, e ao multiplicarmos por $b$, obtemos $ab < b^2$.
\begin{flushleft}
\begin{tabular}{ll}
Hipóteses & Conclusão \\
$a,b\in\mathbb{R}$ & $ a^2 < b^2$\\
$0 < a < b$ & \\
$a^2 < ab$  & \\
$ab < b^2$ &\\
\end{tabular}
\end{flushleft}
Uma vez que $a^2 < ab$ e $ab < b^2$, temos que $a^2 < b^2$, como
queríamos demonstrar.

Como conseguimos deduzir a conclusão a partir das hipóteses,
utilizando o rascunho, devemos proceder para a elaboração do texto
final da prova. De acordo com o modelo de texto descrito na estratégia
de prova \ref{imp1}, o texto deve possuir a seguinte estrutura
inicial:
\begin{flushleft}
Suponha que $0< a < b$.\\
\verb|  |[Prova de $a^2 < b^2$]\\
Portanto, se $0 < a < b$ então $a^2 < b^2$.
\end{flushleft}
Para finalizar o texto, basta preencher o ``buraco'' com o texto da
dedução de $a^2 < b^2$.  O resultado final é apresentado a seguir.
\begin{flushleft}
Suponha que $0< a < b$.\\
\verb|  |Como $0< a < b$, temos que $a,b > 0$ e $a < b$.\\
\verb|  |Como $a > 0$ e $a < b$, temos que $a^2 < ab$.\\
\verb|  |Como $b > 0$ e $a < b$, temos que $ab < b^2$.\\
\verb|  |Como $a^2 < ab$ e $ab < b^2$, temos que $a^2 < b^2$.\\
Portanto, se $0 < a < b$ então $a^2 < b^2$.
\end{flushleft}
\end{Example}
Note que a estrutura da demonstração é indicada utilizando indentação,
de maneira similar a blocos de comandos em linguagens de
programação. Apesar de não ser uma padrão em textos sobre matemática,
há evidências que a utilização de indentação em provas ajuda no
entendimento \cite{Lamport12} e, por isso, este será o padrão adotado
neste texto.